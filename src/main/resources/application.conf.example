# Azure Blob Storage Configuration
blob {
  # Option 1: Use connection string
  connectionString = "DefaultEndpointsProtocol=https;AccountName=your_account;AccountKey=your_key;EndpointSuffix=core.windows.net"
  
  # Option 2: Use managed identity (set useManagedIdentity = true)
  # useManagedIdentity = true
  # accountName = "your_account_name"
  
  # Option 3: Use service principal
  # accountName = "your_account_name"
  # tenantId = "your_tenant_id_guid"
  # clientId = "your_client_id_guid"
  # clientSecret = "your_client_secret_value"
  
  containerName = "your_container_name"
  archiveContainerName = "your_archive_container_name"  # Container for archive file processing
  pollingIntervalSeconds = 60  # Poll every 60 seconds (1 minute)
  processHistoricalData = false  # false = only new changes after startup (default), true = process all blobs on startup
  archiveProcessingDelayMinutes = 10  # Process archive files older than this many minutes (default: 10)
}

# PostgreSQL Database Configuration
database {
  host = "localhost"
  port = 5432
  database = "postgres"
  username = "admin"
  password = "admin"
  schema = "public"
  tableName = "blob_changes"
  maxPoolSize = 10
}

# InfluxDB 3 configuration
# You can use either FlightSQL (gRPC) or REST API (HTTP/HTTPS)
influx {
  # InfluxDB 3 endpoint
  host = "your-cluster-host.com"
  
  # Port depends on protocol:
  #   - For FlightSQL (grpc): typically 443 (TLS) or 8082 (insecure)
  #   - For REST API (http/https): typically 8086 (HTTP) or 443/8086 (HTTPS)
  port = 443

  # Protocol options:
  #   - "grpc"  : FlightSQL using gRPC/HTTP2 (recommended for production, better performance)
  #   - "http"  : REST API using HTTP (for HTTP endpoints, typically port 8086)
  #   - "https" : REST API using HTTPS (for HTTPS endpoints, typically port 443 or 8086)
  # Default is "grpc" if not specified
  protocol = "grpc"  # Options: "grpc", "http", or "https"

  # Database and token
  database = "iris_db"
  token = "YOUR_DB_TOKEN"

  # SQL template; %s will be replaced with the file_name / blob_name
  queryTemplate = "SELECT count(*) FROM iris_data \\n                   WHERE time >= NOW() - INTERVAL '1 day' \\n                     AND file_name = '%s'"

  # SSL / TLS handling:
  #   - false = normal TLS (validate certificate) - recommended for production
  #   - true  = skip TLS validation (insecure, only for development/testing)
  # Note: This applies to both FlightSQL (grpc) and REST API (https) protocols
  skipTlsValidation = false
}
